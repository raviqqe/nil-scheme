version: 2
builds:
  - id: stak
    binary: stak
    builder: rust
    flags: --release -p=stak
  - id: stak-compile
    binary: stak-compile
    builder: rust
    flags: --release -p=stak-compile
  - id: stak-interpret
    binary: stak-interpret
    builder: rust
    flags: --release -p=stak-interpret
  - id: stak-repl
    binary: stak-repl
    builder: rust
    flags: --release -p=stak-repl
  - id: mstak
    binary: mstak
    builder: rust
    dir: cmd/minimal
    flags: --release -p=mstak
    targets:
      - aarch64-apple-darwin
      - aarch64-unknown-linux-gnu
      - x86_64-apple-darwin
      - x86_64-unknown-linux-gnu
  - id: mstak-interpret
    binary: mstak-interpret
    builder: rust
    dir: cmd/minimal
    flags: --release -p=mstak-interpret
    targets:
      - aarch64-apple-darwin
      - aarch64-unknown-linux-gnu
      - x86_64-apple-darwin
      - x86_64-unknown-linux-gnu
